(this["webpackJsonpus-district-map"]=this["webpackJsonpus-district-map"]||[]).push([[0],{143:function(e,t,n){},175:function(e,t){},177:function(e,t){},192:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n(0),r=n.n(o),i=n(50),s=n.n(i),c=(n(143),n(25)),u=n(4),d=n.n(u),l=n(30),p=n(18),f="LOAD_STATES",h="LOAD_COUNTIES",j="LOAD_COVID",b="LOAD_US_COVID",v="SET_ZOOM",O="SET_CENTER",y="SET_FOCUSED_STATE_ID",g="ZOOM",m="SET_TOOLTIP",_=n(20),D=n.n(_),x={states:null,counties:null,isLoading:!1};function S(){return(S=Object(l.a)(d.a.mark((function e(t,n){var a,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"SET_BOUNDARIES_LOADING",payload:!0}),e.next=3,D.a.get("states-10m.json");case 3:return a=e.sent,t({type:f,payload:a.data}),e.next=7,D.a.get("counties-10m.json");case 7:o=e.sent,t({type:h,payload:o.data}),t({type:"SET_BOUNDARIES_LOADING",payload:!1});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;return Object(p.a)(e,(function(e){var n=t.payload;switch(t.type){case f:e.states=n;break;case h:e.counties=n;break;case"SET_BOUNDARIES_LOADING":e.isLoading=n;break;default:return}}))},k=n(112),I={center:[-83.43523233606125,32.63933616159129],zoom:4,focusedStateId:13,tooltip:""},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;return Object(p.a)(e,(function(e){var n=t.payload;switch(t.type){case O:e.center=n;break;case v:e.zoom=n;break;case y:e.focusedStateId=n;break;case m:e.tooltip=n;break;case g:return Object(k.a)({},n);default:return}}))},C=n(202),E={us:[],ma:[],isLoading:!1};function w(){return(w=Object(l.a)(d.a.mark((function e(t,n){var a,o,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"SET_COVID_LOADING",payload:!0}),e.next=3,D.a.get("covid.csv");case 3:return a=e.sent,o=Object(C.a)(a.data),t({type:j,payload:o}),e.next=8,D.a.get("us-covid.csv");case 8:r=e.sent,i=Object(C.a)(r.data),t({type:b,payload:i}),t({type:"SET_COVID_LOADING",payload:!1});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;return Object(p.a)(e,(function(e){var n=t.payload;switch(t.type){case j:e.ma=n;break;case b:e.us=n;break;case"SET_COVID_LOADING":e.isLoading=n;break;default:return}}))},G=n(113),V=n.n(G),N={us:[],ga:{},isLoading:!1};function $(){return($=Object(l.a)(d.a.mark((function e(t,n){var a,o,r,i,s,c,u,l,p,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"SET_VOTING_LOADING",payload:!0}),e.next=3,D.a.get("ga-detail.xml");case 3:return a=e.sent,o=new V.a.Parser,e.next=7,o.parseStringPromise(a.data);case 7:r=e.sent,i=r.ElectionResult.Contest.find((function(e){return"5000"===e.$.key})).Choice,s=i.find((function(e){return"1"===e.$.key})),c=i.find((function(e){return"2"===e.$.key})),u=i.find((function(e){return"3"===e.$.key})),l=function(e,t,n){return t.County.forEach((function(t){var a=t.$.name,o=e.find((function(e){return e.name===a}));if(void 0===o){var r={name:a};r[n]=+t.$.votes,e.push(r)}else o[n]?o[n]+=+t.$.votes:o[n]=+t.$.votes})),e},p=s.VoteType.reduce((function(e,t){return l(e,t,"trump")}),[]),p=c.VoteType.reduce((function(e,t){return l(e,t,"biden")}),p),p=u.VoteType.reduce((function(e,t){return l(e,t,"jorgensen")}),p),f={total:+s.$.totalVotes+ +c.$.totalVotes+ +u.$.totalVotes,trumpTotal:+s.$.totalVotes,bidenTotal:+c.$.totalVotes,jorgensenTotal:+u.$.totalVotes,counties:p},t({type:"SET_GA_DATA",payload:f}),t({type:"SET_VOTING_LOADING",payload:!1});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;return Object(p.a)(e,(function(e){var n=t.payload;switch(t.type){case"SET_GA_DATA":e.ga=n;break;case"SET_VOTING_LOADING":e.isLoading=n;break;default:return}}))},M=Object(c.c)({boundaries:T,mapParams:L,covidData:A,votingData:F}),B=n(115);var z=n(34);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=n(55),P=n(56),W=n(121),Z=n(119),J=n(41),R=n(21),K=n(200),q=n(203),H=n(198),Q=n(118),X=function(e){var t=e.counties,n=e.covidData,o=e.gaVotingData,r=e.focusedStateId,i=e.setTooltip,s=n.filter((function(e){return"11/9/2020"===e.date})).sort((function(e,t){return e.new_confirmed_cases-t.new_confirmed_cases})),c=Object(K.a)().domain([0,s[s.length-1].new_confirmed_cases]).range(["white","red"]),u=o.counties.map((function(e){return e.trump+e.biden+e.jorgensen})),d=Object(q.a)().domain([Math.min.apply(Math,Object(J.a)(u)),Math.max.apply(Math,Object(J.a)(u))]).range([0,1]),l=Object(H.a)().domain([.5,.5]).range(["red","blue"]);return Object(a.jsx)(R.Geographies,{geography:t,children:function(e){var t=e.geographies,n=(e.projection,e.path,t.filter((function(e){return+e.id.substring(0,2)===r})));return Object(a.jsx)(a.Fragment,{children:n.map((function(e){var t=e.properties.name,n=25===r?s.find((function(e){return e.county===t})):void 0,u=13===r?o.counties.find((function(e){return e.name===t})):void 0,p=0;return u&&(p=u.trump+u.biden+u.jorgensen),console.log(d(p)),Object(a.jsx)(R.Geography,{stroke:"#000",geography:e,fill:n?c(n.new_confirmed_cases):u?Q.a(l(u.biden/p)).copy({opacity:d(p)}):"#DDD",onMouseEnter:function(){if(25===r){var e=s.find((function(e){return e.county===t})),n=e.county,o=e.new_confirmed_cases,c=e.total_confirmed_cases;i(Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{children:["County: ",n]}),Object(a.jsxs)("div",{children:["New Cases: ",o]}),Object(a.jsxs)("div",{children:["Total Cases: ",c]})]}))}else if(13===r){var d=u.trump,l=u.biden,p=u.jorgensen;i(Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{children:["County: ",t]}),Object(a.jsxs)("div",{children:["Total Votes: ",l+d+p]}),Object(a.jsxs)("div",{children:["Joe Biden: ",l]}),Object(a.jsxs)("div",{children:["Donald Trump: ",d]}),Object(a.jsxs)("div",{children:["Jo Jorgensen: ",p]})]}))}else i(t)},onMouseLeave:function(){i("")},style:{default:{stroke:"#FFFFFF",strokeWidth:.1,outline:"none"},hover:{fill:"#CFD8DC",stroke:"#607D8B",strokeWidth:.2,outline:"none"}}},e.rsmKey)}))})}})},Y=Object(o.memo)(X),ee=function(e){var t=e.statesBoundaries,n=e.countiesBoundaries,o=e.center,r=e.zoom,i=e.usCovidData,s=e.covidData,c=e.gaVotingData,u=e.focusedStateId,d=e.doZoom,l=(e.setFocusedState,e.setTooltip);return Object(a.jsx)(R.ComposableMap,{"data-tip":"",projection:"geoAlbersUsa",style:{border:"1px black solid",width:"90%",height:"600px"},children:Object(a.jsxs)(R.ZoomableGroup,{center:o,zoom:r,onMoveEnd:function(e,t){var n=e.zoom;d(n<4?{center:e.coordinates,zoom:n,focusedStateId:0}:{center:e.coordinates,zoom:n,focusedStateId:u})},children:[Object(a.jsx)(R.Geographies,{geography:t,children:function(e){var t=e.geographies,n=e.projection,o=e.path,s=Object(J.a)(i).sort((function(e,t){return e.Cases_in_Last_7_Days-t.Cases_in_Last_7_Days})),c=Object(K.a)().domain([0,s[s.length-1].Cases_in_Last_7_Days]).range(["white","red"]);return t.map((function(e){var t=s.find((function(t){return t.State===e.properties.name}));return Object(a.jsx)(R.Geography,{stroke:"#000",geography:e,fill:t?c(t.Cases_in_Last_7_Days):"#DDD",onMouseEnter:function(){var n=e.properties.name;l(Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:n}),Object(a.jsx)("div",{children:t.Cases_in_Last_7_Days})]}))},onMouseLeave:function(){l("")},onClick:function(){return function(e,t,n){var a=t.invert(n.centroid(e));d({center:a,zoom:r>4?r:4,focusedStateId:+e.id})}(e,n,o)},style:{default:{stroke:"#607D8B",strokeWidth:.75/r,outline:"none"},hover:{fill:"#CFD8DC",stroke:"#607D8B",strokeWidth:1/r,outline:"none"}}},e.rsmKey)}))}}),u>0?Object(a.jsx)(Y,{counties:n,covidData:s,gaVotingData:c,setTooltip:l,focusedStateId:u}):null]})})},te=Object(o.memo)(ee);var ne,ae=Object(z.b)((function(e){var t=e.boundaries,n=t.states,a=t.counties,o=e.mapParams;return{statesBoundaries:n,countiesBoundaries:a,zoom:o.zoom,center:o.center,focusedStateId:o.focusedStateId,gaVotingData:e.votingData.ga,usCovidData:e.covidData.us,covidData:e.covidData.ma}}),(function(e){return{setCenter:function(t){e(function(e){return{type:O,payload:e}}(t))},setZoom:function(t){e(function(e){return{type:v,payload:e}}(t))},setFocusedState:function(t){e(function(e){return{type:y,payload:e}}(t))},doZoom:function(t){e(function(e){return{type:g,payload:e}}(t))},setTooltip:function(t){e(function(e){return{type:m,payload:e}}(t))}}}))(te),oe=n(120),re=function(e){Object(W.a)(n,e);var t=Object(Z.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tooltip;return e.isLoading?"Loading":Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:Object(a.jsx)("h1",{children:"US Map"})}),Object(a.jsxs)("div",{children:["Source code: ",Object(a.jsx)("a",{href:"https://github.com/harryphan/us-district-map",children:"Github"}),"Data source: ",Object(a.jsx)("a",{href:"https://results.enr.clarityelections.com/GA/105369/web.264614/#/access-to-races",children:"Georgia Sec of State"})]}),Object(a.jsxs)("div",{style:{padding:"5"},children:[Object(a.jsx)(ae,{}),Object(a.jsx)(oe.a,{children:t})]})]})}}]),n}(o.PureComponent),ie=Object(z.b)((function(e){return{tooltip:e.mapParams.tooltip,isLoading:e.boundaries.isLoading||e.covidData.isLoading||e.votingData.isLoading}}))(re),se=Object(c.d)(M,ne,Object(c.a)(B.a));se.dispatch((function(e,t){return S.apply(this,arguments)})),se.dispatch((function(e,t){return w.apply(this,arguments)})),se.dispatch((function(e,t){return $.apply(this,arguments)})),s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(z.a,{store:se,children:Object(a.jsx)(ie,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[192,1,2]]]);
//# sourceMappingURL=main.550734de.chunk.js.map